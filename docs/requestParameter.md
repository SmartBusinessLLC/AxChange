# Request parameter

Параметри це один з ключових елементів у процесі налаштування інтеграційних процесів. Дана структура слугує для налаштування запитів які будуть відправлятись зовнішній системі по протоколу HTTP чи HTTPS. При створенні параметрів для запитів можна додавати засіб авторизації чи включати дані, що будуть згенеровані системою за допомогою структури `Mapping`. Детальніше про пов'язування у посібнику [Mapping](/ua/mapping.md).

Повну структура параметрів для запиту можна представити так:

```text
└── Request parameter
    ├── Authorization
      ├── Only one of existing
    └── Body
        ├── For Text | Form-urlencoded | binary only one of existing
        └── Form-body
          ├── How much do you need
          └── ...
    └── Headers
        ├── How much do you need
        └── ...
    └── Certificate
        ├── Only one of existing
```

## Створення

Щоб створити параметр оберіть модуль `Organization administration`, далі пункт `Ax Change` і у списку відкрийте форму `Request parameter`.

![](../_media/requestParameter_1.png ":size=300x450")

## Заповнення

Для успішного створення параметрів для запиту потрібно заповнити поля `Name`, `Group name` та `Internet address` (знаходиться в табі `URL Parameter`).

> Поле `Group name` буде встановлено автоматично, якщо відкриття форми параметрів відбулось з форми `Request group`.

### Базові параметри

При відкритті форми, за замовчуванням, ми бачимо всі основні поля.

![](../_media/requestParameter_2.png)

Поля `Name` та `Group name` є обов'язковими для заповнення.

Поле `Method type` також є обов'язковим, але завжди містить значення за замовчуванням і є типом з набором допустимиих значень (лише ті, що доступні у випадаючому списку).

Параметр `Content-Type` заповнюється автоматично і згідного обраного типу даних, які будуть передаватись при створення запиту.

Поле `Only for internal` слугує індикатором того, чи є параметр запитом для внутрішнього використання, тобто не містить основного джерела даних і може бути створеним вручну користувачем або викликаний іншим запитом. Наприклад отримання токену для авторизації іншого запиту.

Поле `Make history` є параметром який свідчить про те, чи буде вестить історія створених запитів та відповідоней від них. За замовчуванням значення встановлено в `Так`.

| Поле              | Обов'язкове                                  | Опис                                                                                                                                       |
| ----------------- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| Name              | <code>Так</code>                             | Ім'я параметрів запиту                                                                                                                     |
| Method type       | <code>Так (за замовчування GET)</code>       | Тип методу запиту                                                                                                                          |
| Group name        | <code>Так</code>                             | Назва групи запитів                                                                                                                        |
| Content-Type      | <code>Ні</code> (недоступне для редагування) | Тип вмісту запиту                                                                                                                          |
| Only for internal | <code>Ні</code>                              | Тільки для внутрішнього використання, тому цей запис не може бути пов'язаний з системним об'єктом. Група або запит не містять джерел даних |
| Make history      | <code>Ні</code>                              | Якщо параметр ТАК, то історія запиту буде збережена                                                                                        |

Зверху, на панелі дій, знаходяться клавіша `Actions` для додавання дій при отриманні відповіді з певним статусом при створенні запиту. Детальніше про дії у посібнику [Actions](/ua/actions.md).

Клавіша `Run internal process` дозволяє створювати запити, для яких параметр `Only for internal` вставновлено в значення `Yes`.

?> Якщо параметр `Only for internal` вставновлено в значення `No`, тоді дана клавіша не буде доступною для натискання.

Також на панелі знаходиться клавіша для перегляду історії створених запитів. Кількість історичних даних для одного налаштованого запиту може бути якою завгодно. Детальніше про історію у посібнику [Request history](/ua/requestHistory.md).

?> Історія створюється лише коли на запиті параметр `Make history` вставновлено в значення `Yes`.

![](../_media/requestParameter_17.png)

### Розділ URL Parameter

Поле `Internet address` є обов'язковим полем і повинно містити веб-адресу до стороннього сервісу. Наприклад:

```text
https://httpbin.org/get
```

![](../_media/requestParameter_3.png)

Поле можна змінювати в будь-який момент часу.

### Розділ Authorization

В даному розділ форми можна налаштувати дані для авторизації запиту, тобто HTTP заголовку Authorization який буде формуватись згідно налаштувань і додаватись до аргументів кінцевого запиту.

![](../_media/requestParameter_4.png)

Авторизація може бути наступних типів:

- [`Basic`](/ua/authBasic.md)
- [`Bearer`](/ua/authBearer.md)
- [`Cookie`](/ua/authCookie.md)

Також вона може бути відсутня зовсім, в такому випадку ніяких додаткових запитів або операцій по формуванню заголовку Authorization не буде.

> В розділі `Authorization` рекомендується заповнювати всі доступні поля, задля уникнення помилок в майбутньому.

?> Для отримання детальної інформації по кожному з типів авторизації, перейдіть на відповідну сторінку.

### Розділ Body

Якщо тип методу не `GET`, тоді є можливим налаштувати тіло запиту.

![](../_media/requestParameter_12.png)

Тип тіла запиту може бути декількох типів:

- [`Form-Data`](/ua/bodyFormData.md)
- [`Form-UrlEncoded`](/ua/bodyFormUrlEncoded.md)
- [`Text`](/ua/bodyText.md)
- [`Binary`](/ua/bodyBinary.md)

?> Для отримання детальної інформації по кожному з типів тіла запиту, перейдіть на відповідну сторінку.

### Розділ Headers

В даному розділ форми можна налаштувати заголовки, що будуть додаватись до кінцевого запиту.
Поля `Key` та `Value` є обов'зковими для заповнення. Поле `Description` містить лише додаткову інформацію про значення.

![](../_media/requestParameter_9.png)

!> Вручну `не можна` додати наступні заголовки: `Accept`, `Connection`, `Content-Length`, `Content-Type`, `Expect`, `Date`,`Host`,`If-Modified-Since`,`Range`,`Referer,`Transfer-Encoding`,`User-Agent`. При спробі додати до запиту заголовок із списку вище, буде отримано попередження і запис не буде створено.

### Розділ Certificate

В даному розділ форми можна налаштувати сертифікат, що буде доданий до запиту.

![](../_media/requestParameter_10.png)

Список із доступних для вибору сертифікатів формується на основі встановленого параметру `CERTIFICATES` в налаштуваннях системи (`System administration` -> `Setup` -> `System parameters`).

![](../_media/requestParameter_11.png)

Якщо поле `Use advanced certificate store` встановлене в значення `Ні`, тоді список із доступних значень формується на основі сертифікатів, що знаходяться в сховищі сервера на якому розташована система Dynamics 365 for Finance and Operations. В іншому випадку значення будуть формуватись на основі сертифікатів, що знаходяться в Microsoft Azure KeyVault Store. Детальніше про те як налаштувати сертифікати [Setting up Azure Key Vault Client](https://support.microsoft.com/en-nz/help/4040305/setting-up-azure-key-vault-client)
